{"id":"8e36f29e-bf90-437a-b585-f8c42c7d98dd","name":"motortown-ingesta","description":"","settings":{"global":{"executionMode":"local","userPluginsJars":[],"preExecutionSqlSentences":[],"postExecutionSqlSentences":[],"addAllUploadedPlugins":true,"mesosConstraint":"","mesosConstraintOperator":"CLUSTER","parametersLists":["Environment"],"parametersUsed":["Environment.POSTGRES_URL","Global.SPARK_CORES_MAX","Global.SPARK_DRIVER_CORES","Global.SPARK_DRIVER_JAVA_OPTIONS","Global.SPARK_DRIVER_MEMORY","Global.SPARK_EXECUTOR_CORES","Global.SPARK_EXECUTOR_EXTRA_JAVA_OPTIONS","Global.SPARK_EXECUTOR_MEMORY","Global.SPARK_LOCALITY_WAIT","Global.SPARK_LOCAL_PATH","Global.SPARK_MEMORY_FRACTION","Global.SPARK_TASK_MAX_FAILURES"],"udfsToRegister":[],"udafsToRegister":[],"mesosRole":""},"streamingSettings":{"window":"2s","blockInterval":"100ms","checkpointSettings":{"checkpointPath":"sparta/checkpoint","enableCheckpointing":true,"autoDeleteCheckpoint":true,"addTimeToCheckpointPath":false}},"sparkSettings":{"master":"mesos://leader.mesos:5050","sparkKerberos":true,"sparkDataStoreTls":true,"sparkMesosSecurity":true,"submitArguments":{"userArguments":[],"deployMode":"client","driverJavaOptions":"{{{Global.SPARK_DRIVER_JAVA_OPTIONS}}}"},"sparkConf":{"sparkResourcesConf":{"coresMax":"{{{Global.SPARK_CORES_MAX}}}","executorMemory":"{{{Global.SPARK_EXECUTOR_MEMORY}}}","executorCores":"{{{Global.SPARK_EXECUTOR_CORES}}}","driverCores":"{{{Global.SPARK_DRIVER_CORES}}}","driverMemory":"{{{Global.SPARK_DRIVER_MEMORY}}}","mesosExtraCores":"","localityWait":"{{{Global.SPARK_LOCALITY_WAIT}}}","taskMaxFailures":"{{{Global.SPARK_TASK_MAX_FAILURES}}}","sparkMemoryFraction":"{{{Global.SPARK_MEMORY_FRACTION}}}","sparkParallelism":""},"sparkHistoryServerConf":{"enableHistoryServerMonitoring":false},"userSparkConf":[],"coarse":true,"sparkUser":"","sparkLocalDir":"{{{Global.SPARK_LOCAL_PATH}}}","sparkKryoSerialization":false,"sparkSqlCaseSensitive":true,"logStagesProgress":false,"hdfsTokenCache":true,"executorExtraJavaOptions":"{{{Global.SPARK_EXECUTOR_EXTRA_JAVA_OPTIONS}}}"}},"errorsManagement":{"genericErrorManagement":{"whenError":"Error"},"transformationStepsManagement":{"whenError":"Error","whenRowError":"RowError","whenFieldError":"FieldError"},"transactionsManagement":{"sendToOutputs":[],"sendStepData":false,"sendPredecessorsData":true,"sendInputData":true}}},"pipelineGraph":{"nodes":[{"name":"Rest","stepType":"Input","className":"RestInputStep","classPrettyName":"Rest","arity":["NullaryToNary"],"writer":{"saveMode":"Append","tableName":"","partitionBy":"","errorTableName":"","discardTableName":""},"uiConfiguration":{"position":{"x":125.07614135742188,"y":259.4393615722656}},"configuration":{"requestTimeout":"30s","HTTP_Body_Format":"JSON","url":"http://http://localhost:8080/productscsv","debugOptions":{"userProvidedExample":"[{\"id\":1,\"content\":\"81978;8019227212723;TPIR2455018100W0R;245/50R18 100W EF.C FR.B R.71 2127200 PIRELLI;2127200;;Activo;NEUMATICOS;TURISMO;False;RUEDAS;RUEDAS;PIRELLI;CINTURATO P7;0;18;245;50;W;100;C;B;71;2;R;;208,5;http://webapi.aurgi.com/Imagenes/imgL/8019227212723.jpg;http://webapi.aurgi.com/Imagenes/imgM/8019227212723.jpg;http://webapi.aurgi.com/Imagenes/imgS/8019227212723.jpg;True;False;False;False;False;42398,9101013,9101005,18434;9101021,9101043,69813,9101009;False;False;False;109PIRT18W\"},{\"id\":1,\"content\":\"36661;4019238314212;TCON1856015084H00;185/60R15 EF.E FR. C R.70 84H 0350062  CONTI;350062;;Activo;NEUMATICOS;TURISMO;False;RUEDAS;RUEDAS;CONTINENTAL;PREM-CON 2;0;15;185;60;H;84;E;C;70;2;0;;71,9;http://webapi.aurgi.com/Imagenes/imgL/4019238314212.jpg;http://webapi.aurgi.com/Imagenes/imgM/4019238314212.jpg;http://webapi.aurgi.com/Imagenes/imgS/4019238314212.jpg;True;False;False;False;False;42398,9101013,9101005,18434;9101021,9101043,69813,9101009;False;False;False;109CONT15H\"},{\"id\":1,\"content\":\"36693;3286347781414;TBRI2355518099V00;235/55 R18 99V EF.E FR.E R.71 77814 BRIDGESTONE;77814;;Activo;NEUMATICOS;TURISMO;False;RUEDAS;RUEDAS;BRIDGESTONE;ER-31;0;18;235;55;V;99;E;E;71;2;0;;147,9;;;;True;False;False;False;False;42398,9101013,9101005,18434;9101021,9101043,69813,9101009;False;False;False;109BRIT18V\"},{\"id\":1,\"content\":\"36661;4019238314212;TCON1856015084H00;185/60R15 EF.E FR. C R.70 84H 0350062  CONTI;350062;;Activo;NEUMATICOS;TURISMO;False;RUEDAS;RUEDAS;CONTINENTAL;PREM-CON 2;0;15;185;60;H;84;E;C;70;2;0;;71,9;http://webapi.aurgi.com/Imagenes/imgL/4019238314212.jpg;http://webapi.aurgi.com/Imagenes/imgM/4019238314212.jpg;http://webapi.aurgi.com/Imagenes/imgS/4019238314212.jpg;True;False;False;False;False;42398,9101013,9101005,18434;9101021,9101043,69813,9101009;False;False;False;109CONT15H\"},{\"id\":2,\"content\":\"36661;4019238;185\"}]"},"httpMethod":"GET","httpOutputField":"raw","HTTP_Header":"[]","HTTP_Body":"","statusCodeWhiteList":"","akkaHttpOptions":"[]"},"supportedEngines":["Batch"],"executionEngine":"Batch","supportedDataRelations":["ValidData"],"lineageProperties":[]},{"name":"ExplodeJson","stepType":"Transformation","className":"TriggerTransformStep","classPrettyName":"Trigger","arity":["BinaryToNary","UnaryToNary","NaryToNary"],"writer":{"saveMode":"Append","tableName":"","partitionBy":"","errorTableName":"","discardTableName":""},"uiConfiguration":{"position":{"x":338.095947265625,"y":260.60546875}},"configuration":{"sql":"select explode(split(raw,'}')) as jsonrows\n from Rest","discardConditions":"[]","inputSchemas":"[]","executeSqlWhenEmpty":true},"supportedEngines":["Batch"],"executionEngine":"Batch","supportedDataRelations":["ValidData","DiscardedData"],"lineageProperties":[]},{"name":"TmpJsonProducts","stepType":"Transformation","className":"JsonTransformStep","classPrettyName":"Json","arity":["UnaryToNary"],"writer":{"saveMode":"Append","tableName":"","partitionBy":"","errorTableName":"","discardTableName":""},"uiConfiguration":{"position":{"x":772.015869140625,"y":257.5189514160156}},"configuration":{"inputSchemas":"[]","schema.fromRow":true,"whenFieldError":"","whenRowError":"","fieldsPreservationPolicy":"REPLACE","inputField":"jsonfixed"},"supportedEngines":["Streaming","Batch"],"executionEngine":"Batch","supportedDataRelations":["ValidData","DiscardedData"],"lineageProperties":[]},{"name":"Postgres","stepType":"Output","className":"PostgresOutputStep","classPrettyName":"Postgres","arity":["NullaryToNullary","NaryToNullary"],"writer":{"saveMode":"Append"},"uiConfiguration":{"position":{"x":1485.09765625,"y":227.8756332397461}},"configuration":{"newQuotesSubstitution":"","dropTemporalTableFailure":"","errorSink":"","dropTemporalTableSuccess":true,"url":"{{{Environment.POSTGRES_URL}}}","postgresSaveMode":"STATEMENT","batchsize":"1000","isolationLevel":"READ_UNCOMMITTED","encoding":"UTF8","failFast":true,"tlsEnabled":"","driver":"","schemaFromDatabase":"","newLineSubstitution":" ","saveOptions":"","delimiter":"\t"},"supportedEngines":["Streaming","Batch"],"executionEngine":"Batch","lineageProperties":[]},{"name":"FixJson1","stepType":"Transformation","className":"TriggerTransformStep","classPrettyName":"Trigger","arity":["BinaryToNary","UnaryToNary","NaryToNary"],"writer":{"saveMode":"Append","tableName":"","partitionBy":"","errorTableName":"","discardTableName":""},"uiConfiguration":{"position":{"x":548.9947501889262,"y":259.65234737407104}},"configuration":{"sql":"select concat(substr(jsonrows,2,length(jsonrows)),'}') as jsonfixed\n from ExplodeJson\n where length(jsonrows) > 1","discardConditions":"[]","inputSchemas":"[]","executeSqlWhenEmpty":true},"supportedEngines":["Batch"],"executionEngine":"Batch","supportedDataRelations":["ValidData","DiscardedData"],"lineageProperties":[]},{"name":"AurgiCsvProducts","stepType":"Transformation","className":"CsvTransformStep","classPrettyName":"Csv","arity":["UnaryToNary"],"writer":{"saveMode":"Append","tableName":"motortown.aurgicsvproducts","partitionBy":"","errorTableName":"","discardTableName":""},"uiConfiguration":{"position":{"x":1237.0664740186203,"y":81.15766555392315}},"configuration":{"schema.inputMode":"HEADER","schema.header":"CodInterno;EAN;Matricula;DescripcionAlias;Descripcion02;Bondades;Estado;Categoria;GrupoProducto;ActivoExterno;Atributo01;Atributo02;Atributo03;Atributo04;Atributo05;Atributo06;Atributo07;Atributo08;Atributo09;Atributo10;Atributo11;Atributo12;Atributo13;Atributo14;Atributo15;Atributo16;Precio;linkImgL;linkImgM;linkImgS;PerteneceGrupo01;PerteneceGrupo02;PerteneceGrupo03;PerteneceGrupo04;PerteneceGrupo05;ServiciosObligatorios;ServiciosOpcionales;DeshabilitadoVenta;ActualizarImagen;ActualizarProductos;FamiliaAntigua","delimiterType":"CHARACTER","inputSchemas":"[]","headerRemoval":false,"splitLimit":"-1","whenFieldError":"","whenRowError":"","fieldsPreservationPolicy":"REPLACE","inputField":"content","delimiter":";"},"supportedEngines":["Streaming","Batch"],"executionEngine":"Batch","supportedDataRelations":["ValidData","DiscardedData"],"lineageProperties":[]},{"name":"FilterProducts","stepType":"Transformation","className":"TriggerTransformStep","classPrettyName":"Trigger","arity":["BinaryToNary","UnaryToNary","NaryToNary"],"writer":{"saveMode":"Append","tableName":"","partitionBy":"","errorTableName":"","discardTableName":""},"uiConfiguration":{"position":{"x":999.1252091328756,"y":76.81173145474224}},"configuration":{"sql":"select content from TmpJsonProducts where id=1","discardConditions":"[]","inputSchemas":"[]","executeSqlWhenEmpty":true},"supportedEngines":["Batch"],"executionEngine":"Batch","supportedDataRelations":["ValidData","DiscardedData"],"lineageProperties":[]},{"name":"AurgiCsvStock","stepType":"Transformation","className":"CsvTransformStep","classPrettyName":"Csv","arity":["UnaryToNary"],"writer":{"saveMode":"Append","tableName":"motortown.aurgicsvstock","partitionBy":"","errorTableName":"","discardTableName":""},"uiConfiguration":{"position":{"x":1219.6826696973312,"y":359.29892474734356}},"configuration":{"schema.inputMode":"HEADER","schema.header":"CodInterno;id_navision;stock","delimiterType":"CHARACTER","inputSchemas":"[]","headerRemoval":false,"splitLimit":"-1","whenFieldError":"","whenRowError":"","fieldsPreservationPolicy":"REPLACE","inputField":"content","delimiter":";"},"supportedEngines":["Streaming","Batch"],"executionEngine":"Batch","supportedDataRelations":["ValidData","DiscardedData"],"lineageProperties":[]},{"name":"FilterStock","stepType":"Transformation","className":"TriggerTransformStep","classPrettyName":"Trigger","arity":["BinaryToNary","UnaryToNary","NaryToNary"],"writer":{"saveMode":"Append","tableName":"","partitionBy":"","errorTableName":"","discardTableName":""},"uiConfiguration":{"position":{"x":981.7414048115864,"y":354.95299064816265}},"configuration":{"sql":"select content from TmpJsonProducts where id=2","discardConditions":"[]","inputSchemas":"[]","executeSqlWhenEmpty":true},"supportedEngines":["Batch"],"executionEngine":"Batch","supportedDataRelations":["ValidData","DiscardedData"],"lineageProperties":[]}],"edges":[{"origin":"Rest","destination":"ExplodeJson","dataType":"ValidData"},{"origin":"ExplodeJson","destination":"FixJson1","dataType":"ValidData"},{"origin":"FixJson1","destination":"TmpJsonProducts","dataType":"ValidData"},{"origin":"AurgiCsvProducts","destination":"Postgres","dataType":"ValidData"},{"origin":"TmpJsonProducts","destination":"FilterProducts","dataType":"ValidData"},{"origin":"FilterProducts","destination":"AurgiCsvProducts","dataType":"ValidData"},{"origin":"FilterStock","destination":"AurgiCsvStock","dataType":"ValidData"},{"origin":"TmpJsonProducts","destination":"FilterStock","dataType":"ValidData"},{"origin":"AurgiCsvStock","destination":"Postgres","dataType":"ValidData"}]},"executionEngine":"Batch","uiSettings":{"position":{"x":12.409517077324836,"y":11.302830726396337,"k":0.9203956052243748}},"lastUpdateDate":"2019-04-17T12:06:06Z","version":0,"group":{"id":"d4adf420-7df0-4d31-a898-21eb1fa1e548","name":"/home/final"},"debugMode":false,"groupId":"d4adf420-7df0-4d31-a898-21eb1fa1e548"}